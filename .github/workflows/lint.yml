---
name: Linting
"on":
  pull_request:
  push:
    branches:
      - main

jobs:
  code_lint:
    name: Lint Code Base ðŸ§½
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ðŸ›Ž
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      - name: Setup Python ðŸ
        uses: actions/setup-python@v4
        with:
          python-version: "3.x"

      - name: Install Python Linters ðŸš§
        run: pip install yamllint

      - name: Run YAMLlint ðŸ§½
        run: yamllint --strict .

      - name: Setup Node ðŸ’»
        uses: actions/setup-node@v3
        with:
          cache: "npm"

      - name: Install Node Linters ðŸš§
        run: npm ci

      - name: Run Typecheck ðŸ§½
        run: npx tsc --project ./tsconfig.json

      - name: Run Prettier ðŸ§½
        run: >
          npx prettier
          --check
          --plugin-search-dir=.
          --plugin=./node_modules/prettier-plugin-astro
          '**/*.{ts,tsx,md,mdx,json,js,mjs,cjs,astro,yml,yaml}'

      - name: Run ESLint ðŸ§½
        run: npx eslint --fix --max-warnings 0 . --ext .js,.ts,.tsx,.astro
